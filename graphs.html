<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baseball Graphs Daily</title>
    <link rel="icon" href="favicon.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: Georgia, "Times New Roman", serif;
            background: linear-gradient(to bottom, #FFF8DC 0%, #F5DEB3 100%);
            color: #2F2F2F;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 960px !important;
            margin: 0 auto !important;
            padding: 0 20px;
        }
        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #1e3a8a 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .breadcrumb {
            text-align: left;
            margin-bottom: 15px;
        }
        .breadcrumb a {
            color: #2563eb;
            text-decoration: none;
            font-size: 1.2em;
        }
        .breadcrumb a:hover {
            text-decoration: underline;
            color: #1e40af;
        }
        .breadcrumb a::before {
            content: "← ";
        }
        .about-section {
            background: white;
            border: 2px solid #1e3a8a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .about-section details {
            cursor: pointer;
        }
        .about-section summary {
            font-weight: bold;
            font-size: 1.1em;
            color: #1e3a8a;
            padding: 5px;
        }
        .about-section .content {
            margin-top: 10px;
            line-height: 1.6;
        }
        .league-selector {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 10px;
        }
        .league-selector label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
        }
        .league-selector input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .standings-box {
            background: white;
            border: 4px solid #1e3a8a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .standings-box h2 {
            text-align: center;
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #2F2F2F;
        }
        .tab-container {
            background: white;
            border: 4px solid #888;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .tab-buttons {
            display: flex;
            border-bottom: 4px solid #888;
        }
        .tab-button {
            flex: 1;
            padding: 12px;
            font-weight: bold;
            font-size: 1.1em;
            background: #f0f0f0;
            border: none;
            border-right: 2px solid #888;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .tab-button:last-child {
            border-right: none;
        }
        .tab-button.active {
            background: white;
        }
        .tab-button:hover:not(.active) {
            background: #e0e0e0;
        }
        .tab-content {
            padding: 20px;
        }
        .tab-content.bg-red-50 {
            background-color: #fef2f2;
        }
        .tab-content.bg-blue-50 {
            background-color: #eff6ff;
        }
        .tab-content.bg-green-50 {
            background-color: #f0fdf4;
        }
        .chart-container {
            position: relative;
            height: 500px;
            margin: 20px 0;
        }
        .graph-info {
            margin-top: 15px;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        .graph-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        .about-graph {
            flex: 1;
        }
        .about-graph details {
            cursor: pointer;
        }
        .about-graph summary {
            font-weight: bold;
            color: #2563eb;
            padding: 5px;
        }
        .about-graph .content {
            margin-top: 10px;
            line-height: 1.6;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        .download-button {
            padding: 8px 16px;
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .download-button:hover {
            transform: scale(1.05);
        }
        .footer-note {
            text-align: center;
            color: #666;
            font-size: 0.85em;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="breadcrumb">
            <a href="https://www.baseballgraphs.com/">To the Historic Baseball Graphs Page</a>
        </div>
        
        <div class="header">
            <h1>Baseball Graphs Daily</h1>
            <div style="margin-top: 10px; font-size: 0.9em;">2025 Season - Updated: Thursday, January 15, 2026 at 10:34 AM EST</div>
        </div>
        
        <div class="about-section">
            <details>
                <summary>About These Graphs</summary>
                <div class="content">
                    <p><strong>Welcome to Baseball Graphs Daily!</strong></p>
                    <p>This page automatically updates each morning with the latest MLB standings and three analytical graphs that help understand team performance.</p>
                    <p>The <strong>Run Differential</strong> graph shows how teams perform offensively and defensively, with Pythagorean win expectancy lines. The <strong>Offensive Profile</strong> graph examines how teams score runs through on-base percentage and power. The <strong>Pitching & Defense</strong> graph separates pitching quality (FIP) from fielding effectiveness (DER).</p>
                    <p>Select American League or National League to view standings and graphs for that league. Click the tabs to switch between the three graphs. For detailed player statistics, visit our <a href="index.html" style="color: #2563eb; text-decoration: underline;">Daily Stats page</a>.</p>
                </div>
            </details>
        </div>
        
        <div class="standings-box">
            <div class="league-selector">
                <label>
                    <input type="radio" name="league" value="AL" checked onchange="updateLeague()">
                    American League
                </label>
                <label>
                    <input type="radio" name="league" value="NL" onchange="updateLeague()">
                    National League
                </label>
            </div>
            
            <div id="alStandings">
                <h2>2025 American League Standings</h2>
                <div class="mb-4"><h3 class="text-lg font-semibold text-gray-800 mb-1">American League East</h3><table class="w-full text-gray-800 text-sm"><thead><tr class="border-b-2 border-blue-800"><th class="text-left py-1 px-2" style="width: 35%;">Team</th><th class="text-center py-1 px-2" style="width: 8%;">W</th><th class="text-center py-1 px-2" style="width: 8%;">L</th><th class="text-center py-1 px-2" style="width: 8%;">GB</th><th class="text-center py-1 px-2" style="width: 10%;">PCT</th><th class="text-center py-1 px-2" style="width: 10%;">RS</th><th class="text-center py-1 px-2" style="width: 10%;">RA</th><th class="text-right py-1 px-2" style="width: 11%;">PythVar</th></tr></thead><tbody class="text-sm"><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/TOR/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Toronto Blue Jays</a></td><td class="text-center py-0 px-2">94</td><td class="text-center py-0 px-2">68</td><td class="text-center py-0 px-2">-</td><td class="text-center py-0 px-2">.580</td><td class="text-center py-0 px-2">798</td><td class="text-center py-0 px-2">721</td><td class="text-right py-0 px-2">4.8</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/NYY/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">New York Yankees</a></td><td class="text-center py-0 px-2">94</td><td class="text-center py-0 px-2">68</td><td class="text-center py-0 px-2">-</td><td class="text-center py-0 px-2">.580</td><td class="text-center py-0 px-2">849</td><td class="text-center py-0 px-2">685</td><td class="text-right py-0 px-2">-4.1</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/BOS/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Boston Red Sox</a>*</td><td class="text-center py-0 px-2">89</td><td class="text-center py-0 px-2">73</td><td class="text-center py-0 px-2">5.0</td><td class="text-center py-0 px-2">.549</td><td class="text-center py-0 px-2">786</td><td class="text-center py-0 px-2">676</td><td class="text-right py-0 px-2">-4.1</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/TB/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Tampa Bay Rays</a></td><td class="text-center py-0 px-2">77</td><td class="text-center py-0 px-2">85</td><td class="text-center py-0 px-2">17.0</td><td class="text-center py-0 px-2">.475</td><td class="text-center py-0 px-2">714</td><td class="text-center py-0 px-2">683</td><td class="text-right py-0 px-2">-7.6</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/BAL/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Baltimore Orioles</a></td><td class="text-center py-0 px-2">75</td><td class="text-center py-0 px-2">87</td><td class="text-center py-0 px-2">19.0</td><td class="text-center py-0 px-2">.463</td><td class="text-center py-0 px-2">677</td><td class="text-center py-0 px-2">788</td><td class="text-right py-0 px-2">6.2</td></tr></tbody></table></div><div class="mb-4"><h3 class="text-lg font-semibold text-gray-800 mb-1">American League Central</h3><table class="w-full text-gray-800 text-sm"><thead><tr class="border-b-2 border-blue-800"><th class="text-left py-1 px-2" style="width: 35%;">Team</th><th class="text-center py-1 px-2" style="width: 8%;">W</th><th class="text-center py-1 px-2" style="width: 8%;">L</th><th class="text-center py-1 px-2" style="width: 8%;">GB</th><th class="text-center py-1 px-2" style="width: 10%;">PCT</th><th class="text-center py-1 px-2" style="width: 10%;">RS</th><th class="text-center py-1 px-2" style="width: 10%;">RA</th><th class="text-right py-1 px-2" style="width: 11%;">PythVar</th></tr></thead><tbody class="text-sm"><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/CLE/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Cleveland Guardians</a></td><td class="text-center py-0 px-2">88</td><td class="text-center py-0 px-2">74</td><td class="text-center py-0 px-2">-</td><td class="text-center py-0 px-2">.543</td><td class="text-center py-0 px-2">643</td><td class="text-center py-0 px-2">649</td><td class="text-right py-0 px-2">7.8</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/DET/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Detroit Tigers</a></td><td class="text-center py-0 px-2">87</td><td class="text-center py-0 px-2">75</td><td class="text-center py-0 px-2">1.0</td><td class="text-center py-0 px-2">.537</td><td class="text-center py-0 px-2">758</td><td class="text-center py-0 px-2">691</td><td class="text-right py-0 px-2">-1.5</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/KC/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Kansas City Royals</a></td><td class="text-center py-0 px-2">82</td><td class="text-center py-0 px-2">80</td><td class="text-center py-0 px-2">6.0</td><td class="text-center py-0 px-2">.506</td><td class="text-center py-0 px-2">651</td><td class="text-center py-0 px-2">637</td><td class="text-right py-0 px-2">-0.8</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/MIN/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Minnesota Twins</a></td><td class="text-center py-0 px-2">70</td><td class="text-center py-0 px-2">92</td><td class="text-center py-0 px-2">18.0</td><td class="text-center py-0 px-2">.432</td><td class="text-center py-0 px-2">678</td><td class="text-center py-0 px-2">773</td><td class="text-right py-0 px-2">-0.4</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/CWS/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Chicago White Sox</a></td><td class="text-center py-0 px-2">60</td><td class="text-center py-0 px-2">102</td><td class="text-center py-0 px-2">28.0</td><td class="text-center py-0 px-2">.370</td><td class="text-center py-0 px-2">647</td><td class="text-center py-0 px-2">742</td><td class="text-right py-0 px-2">-10.0</td></tr></tbody></table></div><div class="mb-4"><h3 class="text-lg font-semibold text-gray-800 mb-1">American League West</h3><table class="w-full text-gray-800 text-sm"><thead><tr class="border-b-2 border-blue-800"><th class="text-left py-1 px-2" style="width: 35%;">Team</th><th class="text-center py-1 px-2" style="width: 8%;">W</th><th class="text-center py-1 px-2" style="width: 8%;">L</th><th class="text-center py-1 px-2" style="width: 8%;">GB</th><th class="text-center py-1 px-2" style="width: 10%;">PCT</th><th class="text-center py-1 px-2" style="width: 10%;">RS</th><th class="text-center py-1 px-2" style="width: 10%;">RA</th><th class="text-right py-1 px-2" style="width: 11%;">PythVar</th></tr></thead><tbody class="text-sm"><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/SEA/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Seattle Mariners</a></td><td class="text-center py-0 px-2">90</td><td class="text-center py-0 px-2">72</td><td class="text-center py-0 px-2">-</td><td class="text-center py-0 px-2">.556</td><td class="text-center py-0 px-2">766</td><td class="text-center py-0 px-2">694</td><td class="text-right py-0 px-2">1.0</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/HOU/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Houston Astros</a>*</td><td class="text-center py-0 px-2">87</td><td class="text-center py-0 px-2">75</td><td class="text-center py-0 px-2">3.0</td><td class="text-center py-0 px-2">.537</td><td class="text-center py-0 px-2">686</td><td class="text-center py-0 px-2">665</td><td class="text-right py-0 px-2">3.5</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/TEX/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Texas Rangers</a></td><td class="text-center py-0 px-2">81</td><td class="text-center py-0 px-2">81</td><td class="text-center py-0 px-2">9.0</td><td class="text-center py-0 px-2">.500</td><td class="text-center py-0 px-2">684</td><td class="text-center py-0 px-2">605</td><td class="text-right py-0 px-2">-9.9</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/ATH/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Athletics</a></td><td class="text-center py-0 px-2">76</td><td class="text-center py-0 px-2">86</td><td class="text-center py-0 px-2">14.0</td><td class="text-center py-0 px-2">.469</td><td class="text-center py-0 px-2">733</td><td class="text-center py-0 px-2">817</td><td class="text-right py-0 px-2">3.8</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/LAA/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Los Angeles Angels</a></td><td class="text-center py-0 px-2">72</td><td class="text-center py-0 px-2">90</td><td class="text-center py-0 px-2">18.0</td><td class="text-center py-0 px-2">.444</td><td class="text-center py-0 px-2">673</td><td class="text-center py-0 px-2">837</td><td class="text-right py-0 px-2">8.4</td></tr></tbody></table></div>
                <div class="footer-note">
                    <strong>*</strong> = Wild Card position | PythVar = Actual Wins - Pythagorean Expected Wins
                </div>
            </div>
            
            <div id="nlStandings" style="display: none;">
                <h2>2025 National League Standings</h2>
                <div class="mb-4"><h3 class="text-lg font-semibold text-gray-800 mb-1">National League East</h3><table class="w-full text-gray-800 text-sm"><thead><tr class="border-b-2 border-blue-800"><th class="text-left py-1 px-2" style="width: 35%;">Team</th><th class="text-center py-1 px-2" style="width: 8%;">W</th><th class="text-center py-1 px-2" style="width: 8%;">L</th><th class="text-center py-1 px-2" style="width: 8%;">GB</th><th class="text-center py-1 px-2" style="width: 10%;">PCT</th><th class="text-center py-1 px-2" style="width: 10%;">RS</th><th class="text-center py-1 px-2" style="width: 10%;">RA</th><th class="text-right py-1 px-2" style="width: 11%;">PythVar</th></tr></thead><tbody class="text-sm"><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/PHI/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Philadelphia Phillies</a></td><td class="text-center py-0 px-2">96</td><td class="text-center py-0 px-2">66</td><td class="text-center py-0 px-2">-</td><td class="text-center py-0 px-2">.593</td><td class="text-center py-0 px-2">778</td><td class="text-center py-0 px-2">648</td><td class="text-right py-0 px-2">0.4</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/NYM/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">New York Mets</a>*</td><td class="text-center py-0 px-2">83</td><td class="text-center py-0 px-2">79</td><td class="text-center py-0 px-2">13.0</td><td class="text-center py-0 px-2">.512</td><td class="text-center py-0 px-2">766</td><td class="text-center py-0 px-2">715</td><td class="text-right py-0 px-2">-3.6</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/MIA/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Miami Marlins</a></td><td class="text-center py-0 px-2">79</td><td class="text-center py-0 px-2">83</td><td class="text-center py-0 px-2">17.0</td><td class="text-center py-0 px-2">.488</td><td class="text-center py-0 px-2">709</td><td class="text-center py-0 px-2">798</td><td class="text-right py-0 px-2">7.5</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/ATL/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Atlanta Braves</a></td><td class="text-center py-0 px-2">76</td><td class="text-center py-0 px-2">86</td><td class="text-center py-0 px-2">20.0</td><td class="text-center py-0 px-2">.469</td><td class="text-center py-0 px-2">724</td><td class="text-center py-0 px-2">734</td><td class="text-right py-0 px-2">-3.9</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/WSH/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Washington Nationals</a></td><td class="text-center py-0 px-2">66</td><td class="text-center py-0 px-2">96</td><td class="text-center py-0 px-2">30.0</td><td class="text-center py-0 px-2">.407</td><td class="text-center py-0 px-2">687</td><td class="text-center py-0 px-2">899</td><td class="text-right py-0 px-2">6.3</td></tr></tbody></table></div><div class="mb-4"><h3 class="text-lg font-semibold text-gray-800 mb-1">National League Central</h3><table class="w-full text-gray-800 text-sm"><thead><tr class="border-b-2 border-blue-800"><th class="text-left py-1 px-2" style="width: 35%;">Team</th><th class="text-center py-1 px-2" style="width: 8%;">W</th><th class="text-center py-1 px-2" style="width: 8%;">L</th><th class="text-center py-1 px-2" style="width: 8%;">GB</th><th class="text-center py-1 px-2" style="width: 10%;">PCT</th><th class="text-center py-1 px-2" style="width: 10%;">RS</th><th class="text-center py-1 px-2" style="width: 10%;">RA</th><th class="text-right py-1 px-2" style="width: 11%;">PythVar</th></tr></thead><tbody class="text-sm"><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/MIL/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Milwaukee Brewers</a></td><td class="text-center py-0 px-2">97</td><td class="text-center py-0 px-2">65</td><td class="text-center py-0 px-2">-</td><td class="text-center py-0 px-2">.599</td><td class="text-center py-0 px-2">806</td><td class="text-center py-0 px-2">634</td><td class="text-right py-0 px-2">-3.1</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/CHC/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Chicago Cubs</a>*</td><td class="text-center py-0 px-2">92</td><td class="text-center py-0 px-2">70</td><td class="text-center py-0 px-2">5.0</td><td class="text-center py-0 px-2">.568</td><td class="text-center py-0 px-2">793</td><td class="text-center py-0 px-2">649</td><td class="text-right py-0 px-2">-5.0</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/CIN/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Cincinnati Reds</a></td><td class="text-center py-0 px-2">83</td><td class="text-center py-0 px-2">79</td><td class="text-center py-0 px-2">14.0</td><td class="text-center py-0 px-2">.512</td><td class="text-center py-0 px-2">716</td><td class="text-center py-0 px-2">681</td><td class="text-right py-0 px-2">-2.1</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/STL/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">St. Louis Cardinals</a></td><td class="text-center py-0 px-2">78</td><td class="text-center py-0 px-2">84</td><td class="text-center py-0 px-2">19.0</td><td class="text-center py-0 px-2">.481</td><td class="text-center py-0 px-2">689</td><td class="text-center py-0 px-2">754</td><td class="text-right py-0 px-2">4.3</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/PIT/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Pittsburgh Pirates</a></td><td class="text-center py-0 px-2">71</td><td class="text-center py-0 px-2">91</td><td class="text-center py-0 px-2">26.0</td><td class="text-center py-0 px-2">.438</td><td class="text-center py-0 px-2">583</td><td class="text-center py-0 px-2">645</td><td class="text-right py-0 px-2">-1.8</td></tr></tbody></table></div><div class="mb-4"><h3 class="text-lg font-semibold text-gray-800 mb-1">National League West</h3><table class="w-full text-gray-800 text-sm"><thead><tr class="border-b-2 border-blue-800"><th class="text-left py-1 px-2" style="width: 35%;">Team</th><th class="text-center py-1 px-2" style="width: 8%;">W</th><th class="text-center py-1 px-2" style="width: 8%;">L</th><th class="text-center py-1 px-2" style="width: 8%;">GB</th><th class="text-center py-1 px-2" style="width: 10%;">PCT</th><th class="text-center py-1 px-2" style="width: 10%;">RS</th><th class="text-center py-1 px-2" style="width: 10%;">RA</th><th class="text-right py-1 px-2" style="width: 11%;">PythVar</th></tr></thead><tbody class="text-sm"><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/LAD/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Los Angeles Dodgers</a></td><td class="text-center py-0 px-2">93</td><td class="text-center py-0 px-2">69</td><td class="text-center py-0 px-2">-</td><td class="text-center py-0 px-2">.574</td><td class="text-center py-0 px-2">825</td><td class="text-center py-0 px-2">683</td><td class="text-right py-0 px-2">-3.1</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/SD/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">San Diego Padres</a>*</td><td class="text-center py-0 px-2">90</td><td class="text-center py-0 px-2">72</td><td class="text-center py-0 px-2">3.0</td><td class="text-center py-0 px-2">.556</td><td class="text-center py-0 px-2">702</td><td class="text-center py-0 px-2">621</td><td class="text-right py-0 px-2">-0.9</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/SF/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">San Francisco Giants</a></td><td class="text-center py-0 px-2">81</td><td class="text-center py-0 px-2">81</td><td class="text-center py-0 px-2">12.0</td><td class="text-center py-0 px-2">.500</td><td class="text-center py-0 px-2">705</td><td class="text-center py-0 px-2">684</td><td class="text-right py-0 px-2">-2.4</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/AZ/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Arizona Diamondbacks</a></td><td class="text-center py-0 px-2">80</td><td class="text-center py-0 px-2">82</td><td class="text-center py-0 px-2">13.0</td><td class="text-center py-0 px-2">.494</td><td class="text-center py-0 px-2">791</td><td class="text-center py-0 px-2">785</td><td class="text-right py-0 px-2">-1.6</td></tr><tr class="hover:bg-blue-50 leading-tight"><td class="py-0 px-2"><a href="https://www.baseball-reference.com/teams/COL/2025.shtml" target="_blank" style="color: #2563eb; text-decoration: underline;">Colorado Rockies</a></td><td class="text-center py-0 px-2">43</td><td class="text-center py-0 px-2">119</td><td class="text-center py-0 px-2">50.0</td><td class="text-center py-0 px-2">.265</td><td class="text-center py-0 px-2">597</td><td class="text-center py-0 px-2">1021</td><td class="text-right py-0 px-2">1.7</td></tr></tbody></table></div>
                <div class="footer-note">
                    <strong>*</strong> = Wild Card position | PythVar = Actual Wins - Pythagorean Expected Wins
                </div>
            </div>
        </div>
        
        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab(1)">Run Differential</button>
                <button class="tab-button" onclick="switchTab(2)">Runs Scored</button>
                <button class="tab-button" onclick="switchTab(3)">Runs Allowed</button>
            </div>
            
            <div id="tab1" class="tab-content bg-red-50">
                <h2 style="text-align: center; font-size: 1.5em; margin-bottom: 5px;">Win Expectation: Runs Scored and Runs Allowed</h2>
                <p id="graph1Title" style="text-align: center; color: #666; margin-bottom: 15px;"></p>
                <div class="chart-container">
                    <canvas id="chart1"></canvas>
                </div>
                <div class="graph-info">
                    <p>Better teams (upper right) score more and allow fewer runs</p>
                    <p>Win% lines of .400, .500 and .600 are based on the Pythagorean Formula</p>
                    <p>Hover over a data point to see the team name and wins</p>
                </div>
                <div class="graph-controls">
                    <div class="about-graph">
                        <details>
                            <summary>About This Graph</summary>
                            <div class="content">
                                <p><strong>Run Differential</strong></p>
                                <p>This graph shows how well each team performed scoring and allowing runs, which are the drivers of baseball success. The Runs Allowed axis (Y axis) is reversed, so that the best defensive teams are at the top and the best scoring teams are on the right.</p>
                                <p>The dotted lines are based on the Pythagorean Theorem (RS²)/(RS²+RA²), which is a good predictor of winning percentage. The lines are drawn at different winning percentages so you can compare teams in different areas of the graph. The best teams will be above the .600 line.</p>
                                <p>If you hover over a datapoint, you'll see the team name and actual wins. The PythVar column in the standings shows the difference between actual wins and Pythagorean wins.</p>
                            </div>
                        </details>
                    </div>
                    <button class="download-button" onclick="downloadChart(1)">Download Graph</button>
                </div>
            </div>
            
            <div id="tab2" class="tab-content bg-blue-50" style="display: none;">
                <h2 style="text-align: center; font-size: 1.5em; margin-bottom: 5px;">Offensive Profile: OBP and ISO</h2>
                <p id="graph2Title" style="text-align: center; color: #666; margin-bottom: 15px;"></p>
                <div class="chart-container">
                    <canvas id="chart2"></canvas>
                </div>
                <div class="graph-info">
                    <p>Better offensive teams are in the upper right (high OBP and high power)</p>
                    <p>Dotted lines represent league averages</p>
                    <p>Hover over a data point to see the team name and runs scored</p>
                </div>
                <div class="graph-controls">
                    <div class="about-graph">
                        <details>
                            <summary>About This Graph</summary>
                            <div class="content">
                                <p><strong>How Teams Score Runs</strong></p>
                                <p>This graph examines the two key components of offense: getting on base (OBP) and hitting for power (ISO - Isolated Power). ISO is calculated as slugging percentage minus batting average, measuring extra bases per at-bat.</p>
                                <p>Teams in the upper right excel at both getting on base and hitting for power, producing the most runs. Teams in the lower left struggle with both. The dotted lines show league averages for reference.</p>
                                <p>This helps identify whether a team's offensive success comes from patience at the plate, power hitting, or a combination of both.</p>
                            </div>
                        </details>
                    </div>
                    <button class="download-button" onclick="downloadChart(2)">Download Graph</button>
                </div>
            </div>
            
            <div id="tab3" class="tab-content bg-green-50" style="display: none;">
                <h2 style="text-align: center; font-size: 1.5em; margin-bottom: 5px;">Pitching & Defense: FIP and DER</h2>
                <p id="graph3Title" style="text-align: center; color: #666; margin-bottom: 15px;"></p>
                <div class="chart-container">
                    <canvas id="chart3"></canvas>
                </div>
                <div class="graph-info">
                    <p>Better pitching teams are on the right; better fielding teams are near the top</p>
                    <p>Dotted lines represent league averages</p>
                    <p>Hover over a data point to see the team name and runs allowed</p>
                </div>
                <div class="graph-controls">
                    <div class="about-graph">
                        <details>
                            <summary>About This Graph</summary>
                            <div class="content">
                                <p><strong>Separating Pitching and Fielding</strong></p>
                                <p>The easiest way to judge pitching effectiveness is to isolate outcomes that don't involve fielders: strikeouts, walks, and home runs. That's what FIP measures: (HR×13 + BB×3 - K×2) / IP. Lower FIP indicates better pitching.</p>
                                <p>All other batted balls involve fielders. To measure fielding, we use Defensive Efficiency Record (DER), which is the percent of batted balls (excluding home runs) turned into outs by fielders. Higher DER indicates better fielding.</p>
                                <p>The FIP axis is reversed so that better pitching teams are on the right. The best overall teams (upper right) combine strong pitching and fielding.</p>
                            </div>
                        </details>
                    </div>
                    <button class="download-button" onclick="downloadChart(3)">Download Graph</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const alData = [{"name":"Los Angeles Angels","abbreviation":"LAA","league":"American League","division":"American League West","w":72,"l":90,"pct":".444","gb":"18.0","wcGb":"15.0","wcRank":"10","rs":673,"ra":837,"gamesPlayed":162,"pythVar":8.389575014434357,"rsPerGame":4.154320987654321,"raPerGame":5.166666666666667,"obp":0.2976588628762542,"iso":0.17193896538890954,"fip":1.645587310460485,"der":0.7141705970184627},{"name":"Baltimore Orioles","abbreviation":"BAL","league":"American League","division":"American League East","w":75,"l":87,"pct":".463","gb":"19.0","wcGb":"12.0","wcRank":"9","rs":677,"ra":788,"gamesPlayed":162,"pythVar":6.204340329091892,"rsPerGame":4.179012345679013,"raPerGame":4.864197530864198,"obp":0.3045212765957447,"iso":0.15915805022156573,"fip":1.2791509565703114,"der":0.7078046905036525},{"name":"Boston Red Sox","abbreviation":"BOS","league":"American League","division":"American League East","w":89,"l":73,"pct":".549","gb":"5.0","wcGb":"+2.0","wcRank":"2","rs":786,"ra":676,"gamesPlayed":162,"pythVar":-4.120170603625695,"rsPerGame":4.851851851851852,"raPerGame":4.172839506172839,"obp":0.32359115129985466,"iso":0.1672060409924488,"fip":0.8417926938747324,"der":0.7184692820846277},{"name":"Cleveland Guardians","abbreviation":"CLE","league":"American League","division":"American League Central","w":88,"l":74,"pct":".543","gb":"-","wcGb":"-","rs":643,"ra":649,"gamesPlayed":162,"pythVar":7.752305756904093,"rsPerGame":3.9691358024691357,"raPerGame":4.006172839506172,"obp":0.29641528576259724,"iso":0.14745762711864405,"fip":0.8169209431345353,"der":0.7241209736906811},{"name":"Detroit Tigers","abbreviation":"DET","league":"American League","division":"American League Central","w":87,"l":75,"pct":".537","gb":"1.0","wcGb":"-","wcRank":"4","rs":758,"ra":691,"gamesPlayed":162,"pythVar":-1.4747021277606933,"rsPerGame":4.679012345679013,"raPerGame":4.265432098765432,"obp":0.3160144689246958,"iso":0.16678885630498536,"fip":0.9142817352552052,"der":0.7233250314403372},{"name":"Houston Astros","abbreviation":"HOU","league":"American League","division":"American League West","w":87,"l":75,"pct":".537","gb":"3.0","wcGb":"-","wcRank":"3","rs":686,"ra":665,"gamesPlayed":162,"pythVar":3.482473562724792,"rsPerGame":4.234567901234568,"raPerGame":4.104938271604938,"obp":0.31532125205930805,"iso":0.148816029143898,"fip":0.8855755894590847,"der":0.7273195876288661},{"name":"Kansas City Royals","abbreviation":"KC","league":"American League","division":"American League Central","w":82,"l":80,"pct":".506","gb":"6.0","wcGb":"5.0","wcRank":"5","rs":651,"ra":637,"gamesPlayed":162,"pythVar":-0.7606615475487359,"rsPerGame":4.018518518518518,"raPerGame":3.932098765432099,"obp":0.30890227576974566,"iso":0.14969618854722885,"fip":0.8703523186185768,"der":0.7276385761510085},{"name":"Athletics","abbreviation":"ATH","league":"American League","division":"American League West","w":76,"l":86,"pct":".469","gb":"14.0","wcGb":"11.0","wcRank":"8","rs":733,"ra":817,"gamesPlayed":162,"pythVar":3.753645899908534,"rsPerGame":4.5246913580246915,"raPerGame":5.04320987654321,"obp":0.31804830287206265,"iso":0.17757346313322514,"fip":1.5237962705260228,"der":0.7195204160246533},{"name":"Seattle Mariners","abbreviation":"SEA","league":"American League","division":"American League West","w":90,"l":72,"pct":".556","gb":"-","wcGb":"-","rs":766,"ra":694,"gamesPlayed":162,"pythVar":1.0303409235561531,"rsPerGame":4.728395061728395,"raPerGame":4.283950617283951,"obp":0.3204276688806091,"iso":0.17557251908396945,"fip":0.8398303925591574,"der":0.7221680163918431},{"name":"Tampa Bay Rays","abbreviation":"TB","league":"American League","division":"American League East","w":77,"l":85,"pct":".475","gb":"17.0","wcGb":"10.0","wcRank":"7","rs":714,"ra":683,"gamesPlayed":162,"pythVar":-7.593076816708233,"rsPerGame":4.407407407407407,"raPerGame":4.216049382716049,"obp":0.3132570101211216,"iso":0.14990859232175502,"fip":1.0173992034099644,"der":0.7292981522317694},{"name":"Texas Rangers","abbreviation":"TEX","league":"American League","division":"American League West","w":81,"l":81,"pct":".500","gb":"9.0","wcGb":"6.0","wcRank":"6","rs":684,"ra":605,"gamesPlayed":162,"pythVar":-9.891472524257054,"rsPerGame":4.222222222222222,"raPerGame":3.734567901234568,"obp":0.30238726790450926,"iso":0.14697776961234613,"fip":0.7532917532917532,"der":0.737401185770751},{"name":"Toronto Blue Jays","abbreviation":"TOR","league":"American League","division":"American League East","w":94,"l":68,"pct":".580","gb":"-","wcGb":"-","rs":798,"ra":721,"gamesPlayed":162,"pythVar":4.809065875873756,"rsPerGame":4.925925925925926,"raPerGame":4.450617283950617,"obp":0.3333876486882842,"iso":0.1621572544034865,"fip":1.129346314325452,"der":0.7231695085255767},{"name":"Minnesota Twins","abbreviation":"MIN","league":"American League","division":"American League Central","w":70,"l":92,"pct":".432","gb":"18.0","wcGb":"17.0","wcRank":"11","rs":678,"ra":773,"gamesPlayed":162,"pythVar":-0.43879331790282095,"rsPerGame":4.185185185185185,"raPerGame":4.771604938271605,"obp":0.3104645395933212,"iso":0.15868924889543443,"fip":0.9549852755574253,"der":0.7048695314773499},{"name":"Chicago White Sox","abbreviation":"CWS","league":"American League","division":"American League Central","w":60,"l":102,"pct":".370","gb":"28.0","wcGb":"27.0","wcRank":"12","rs":647,"ra":742,"gamesPlayed":162,"pythVar":-9.971674819665836,"rsPerGame":3.993827160493827,"raPerGame":4.580246913580247,"obp":0.30151006711409395,"iso":0.14097080156220942,"fip":1.3319209039548023,"der":0.7208566561207106},{"name":"New York Yankees","abbreviation":"NYY","league":"American League","division":"American League East","w":94,"l":68,"pct":".580","gb":"-","wcGb":"+7.0","wcRank":"1","rs":849,"ra":685,"gamesPlayed":162,"pythVar":-4.1237065408654985,"rsPerGame":5.2407407407407405,"raPerGame":4.228395061728395,"obp":0.33204695288631614,"iso":0.2041674282580881,"fip":0.8595052807115063,"der":0.7300588593464583}];
        const nlData = [{"name":"Arizona Diamondbacks","abbreviation":"AZ","league":"National League","division":"National League West","w":80,"l":82,"pct":".494","gb":"13.0","wcGb":"3.0","wcRank":"6","rs":791,"ra":785,"gamesPlayed":162,"pythVar":-1.6167423299347945,"rsPerGame":4.882716049382716,"raPerGame":4.845679012345679,"obp":0.3246353322528363,"iso":0.1815693430656934,"fip":1.1378116343490305,"der":0.716066807809927},{"name":"Chicago Cubs","abbreviation":"CHC","league":"National League","division":"National League Central","w":92,"l":70,"pct":".568","gb":"5.0","wcGb":"+9.0","wcRank":"1","rs":793,"ra":649,"gamesPlayed":162,"pythVar":-5.01779724775011,"rsPerGame":4.895061728395062,"raPerGame":4.006172839506172,"obp":0.3204878048780488,"iso":0.18089171974522292,"fip":1.024390243902439,"der":0.737506065016982},{"name":"Cincinnati Reds","abbreviation":"CIN","league":"National League","division":"National League Central","w":83,"l":79,"pct":".512","gb":"14.0","wcGb":"-","wcRank":"4","rs":716,"ra":681,"gamesPlayed":162,"pythVar":-2.0561512140816944,"rsPerGame":4.419753086419753,"raPerGame":4.203703703703703,"obp":0.31482701812191105,"iso":0.14629221732745962,"fip":0.9707317073170731,"der":0.7321652065081352},{"name":"Colorado Rockies","abbreviation":"COL","league":"National League","division":"National League West","w":43,"l":119,"pct":".265","gb":"50.0","wcGb":"40.0","wcRank":"12","rs":597,"ra":1021,"gamesPlayed":162,"pythVar":1.7244822532794757,"rsPerGame":3.685185185185185,"raPerGame":6.302469135802469,"obp":0.29289840299014613,"iso":0.14922337278106507,"fip":2.102196005969725,"der":0.6874931323209459},{"name":"Los Angeles Dodgers","abbreviation":"LAD","league":"National League","division":"National League West","w":93,"l":69,"pct":".574","gb":"-","wcGb":"-","rs":825,"ra":683,"gamesPlayed":162,"pythVar":-3.120568661876675,"rsPerGame":5.092592592592593,"raPerGame":4.216049382716049,"obp":0.3273375465888835,"iso":0.1881043605181536,"fip":0.7973629424011104,"der":0.7238633444644234},{"name":"Washington Nationals","abbreviation":"WSH","league":"National League","division":"National League East","w":66,"l":96,"pct":".407","gb":"30.0","wcGb":"17.0","wcRank":"11","rs":687,"ra":899,"gamesPlayed":162,"pythVar":6.274355749627006,"rsPerGame":4.2407407407407405,"raPerGame":5.549382716049383,"obp":0.30409258638040926,"iso":0.14699372925119883,"fip":1.5817581336518869,"der":0.7029057999674289},{"name":"New York Mets","abbreviation":"NYM","league":"National League","division":"National League East","w":83,"l":79,"pct":".512","gb":"13.0","wcGb":"-","wcRank":"3","rs":766,"ra":715,"gamesPlayed":162,"pythVar":-3.572055436296253,"rsPerGame":4.728395061728395,"raPerGame":4.41358024691358,"obp":0.3261363636363636,"iso":0.1781198460692688,"fip":0.7479050279329609,"der":0.709858467545144},{"name":"Pittsburgh Pirates","abbreviation":"PIT","league":"National League","division":"National League Central","w":71,"l":91,"pct":".438","gb":"26.0","wcGb":"12.0","wcRank":"10","rs":583,"ra":645,"gamesPlayed":162,"pythVar":-1.8416433615464172,"rsPerGame":3.5987654320987654,"raPerGame":3.9814814814814814,"obp":0.30512435319646136,"iso":0.11869767441860463,"fip":0.698503705775416,"der":0.7276683127169609},{"name":"San Diego Padres","abbreviation":"SD","league":"National League","division":"National League West","w":90,"l":72,"pct":".556","gb":"3.0","wcGb":"+7.0","wcRank":"2","rs":702,"ra":621,"gamesPlayed":162,"pythVar":-0.8813278008298795,"rsPerGame":4.333333333333333,"raPerGame":3.8333333333333335,"obp":0.3208547291701176,"iso":0.13753687315634217,"fip":0.8820655966503839,"der":0.7382481376830208},{"name":"San Francisco Giants","abbreviation":"SF","league":"National League","division":"National League West","w":81,"l":81,"pct":".500","gb":"12.0","wcGb":"2.0","wcRank":"5","rs":705,"ra":684,"gamesPlayed":162,"pythVar":-2.448684345530694,"rsPerGame":4.351851851851852,"raPerGame":4.222222222222222,"obp":0.3112911224995867,"iso":0.1514418604651163,"fip":0.6056377337426737,"der":0.7085461027073899},{"name":"St. Louis Cardinals","abbreviation":"STL","league":"National League","division":"National League Central","w":78,"l":84,"pct":".481","gb":"19.0","wcGb":"5.0","wcRank":"8","rs":689,"ra":754,"gamesPlayed":162,"pythVar":4.282520654462985,"rsPerGame":4.253086419753086,"raPerGame":4.654320987654321,"obp":0.31412485510846166,"iso":0.13362782992821645,"fip":0.9210893854748603,"der":0.7094920707883245},{"name":"Philadelphia Phillies","abbreviation":"PHI","league":"National League","division":"National League East","w":96,"l":66,"pct":".593","gb":"-","wcGb":"-","rs":778,"ra":648,"gamesPlayed":162,"pythVar":0.35314498413949025,"rsPerGame":4.802469135802469,"raPerGame":4,"obp":0.3276394989425736,"iso":0.17255754939278595,"fip":0.5694049024373308,"der":0.7097875096529905},{"name":"Atlanta Braves","abbreviation":"ATL","league":"National League","division":"National League East","w":76,"l":86,"pct":".469","gb":"20.0","wcGb":"7.0","wcRank":"9","rs":724,"ra":734,"gamesPlayed":162,"pythVar":-3.8889411552197117,"rsPerGame":4.469135802469136,"raPerGame":4.530864197530864,"obp":0.320097244732577,"iso":0.1545025417574437,"fip":1.0632823365785813,"der":0.7157322795752037},{"name":"Miami Marlins","abbreviation":"MIA","league":"National League","division":"National League East","w":79,"l":83,"pct":".488","gb":"17.0","wcGb":"4.0","wcRank":"7","rs":709,"ra":798,"gamesPlayed":162,"pythVar":7.534099176382313,"rsPerGame":4.3765432098765435,"raPerGame":4.925925925925926,"obp":0.31422505307855625,"iso":0.14288291538877868,"fip":1.2008869794193058,"der":0.7205802055883959},{"name":"Milwaukee Brewers","abbreviation":"MIL","league":"National League","division":"National League Central","w":97,"l":65,"pct":".599","gb":"-","wcGb":"-","rs":806,"ra":634,"gamesPlayed":162,"pythVar":-3.0778172523183827,"rsPerGame":4.9753086419753085,"raPerGame":3.9135802469135803,"obp":0.3324189123769566,"iso":0.14500907441016336,"fip":0.7766990291262136,"der":0.730254857431239}];
        let currentLeague = 'AL';
        let chart1, chart2, chart3;
        
        // Plugin to draw team labels with collision detection
        const labelPlugin = {
            afterDatasetsDraw: function(chart) {
                const ctx = chart.ctx;
                const meta = chart.getDatasetMeta(0);
                
                if (!meta.data || meta.data.length === 0) return;
                
                // First pass: calculate initial label positions
                const labels = chart.data.datasets[0].data.map(function(datapoint, index) {
                    const point = meta.data[index];
                    const labelText = datapoint.label || '';
                    
                    ctx.font = 'bold 13px sans-serif';
                    const textMetrics = ctx.measureText(labelText);
                    const textWidth = textMetrics.width;
                    const textHeight = 16;
                    
                    const positions = [
                        { xOffset: 8, yOffset: 18, align: 'left' },
                        { xOffset: 8, yOffset: -8, align: 'left' },
                        { xOffset: -8, yOffset: 18, align: 'right' },
                        { xOffset: -8, yOffset: -8, align: 'right' },
                        { xOffset: 0, yOffset: -20, align: 'center' },
                        { xOffset: 0, yOffset: 28, align: 'center' }
                    ];
                    
                    return {
                        point: point,
                        text: labelText,
                        width: textWidth,
                        height: textHeight,
                        positions: positions,
                        selectedPosition: 0
                    };
                });
                
                function rectanglesOverlap(r1, r2) {
                    return !(r1.right < r2.left || r1.left > r2.right || r1.bottom < r2.top || r1.top > r2.bottom);
                }
                
                function getLabelRect(label, posIndex) {
                    const pos = label.positions[posIndex];
                    const padding = 2;
                    let left;
                    if (pos.align === 'right') {
                        left = label.point.x + pos.xOffset - label.width - padding * 2;
                    } else if (pos.align === 'center') {
                        left = label.point.x + pos.xOffset - label.width / 2 - padding;
                    } else {
                        left = label.point.x + pos.xOffset - padding;
                    }
                    const top = label.point.y + pos.yOffset - label.height + 2;
                    return { left, right: left + label.width + padding * 2, top, bottom: top + label.height, pos };
                }
                
                // Second pass: resolve collisions
                for (let i = 0; i < labels.length; i++) {
                    let foundPosition = false;
                    for (let posIndex = 0; posIndex < labels[i].positions.length && !foundPosition; posIndex++) {
                        const currentRect = getLabelRect(labels[i], posIndex);
                        let hasCollision = false;
                        for (let j = 0; j < i; j++) {
                            const otherRect = getLabelRect(labels[j], labels[j].selectedPosition);
                            if (rectanglesOverlap(currentRect, otherRect)) {
                                hasCollision = true;
                                break;
                            }
                        }
                        if (!hasCollision) {
                            labels[i].selectedPosition = posIndex;
                            foundPosition = true;
                        }
                    }
                    if (!foundPosition) labels[i].selectedPosition = 0;
                }
                
                // Third pass: draw labels
                labels.forEach(function(label) {
                    const pos = label.positions[label.selectedPosition];
                    const rect = getLabelRect(label, label.selectedPosition);
                    
                    ctx.save();
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                    ctx.fillRect(rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top);
                    ctx.font = 'bold 13px sans-serif';
                    ctx.fillStyle = '#000';
                    ctx.textAlign = pos.align;
                    ctx.fillText(label.text, label.point.x + pos.xOffset, label.point.y + pos.yOffset);
                    ctx.restore();
                });
            }
        };
        
        function updateLeague() {
            const selected = document.querySelector('input[name="league"]:checked').value;
            currentLeague = selected;
            
            if (selected === 'AL') {
                document.getElementById('alStandings').style.display = 'block';
                document.getElementById('nlStandings').style.display = 'none';
            } else {
                document.getElementById('alStandings').style.display = 'none';
                document.getElementById('nlStandings').style.display = 'block';
            }
            
            updateAllCharts();
        }
        
        function switchTab(tabNum) {
            // Hide all tabs
            for (let i = 1; i <= 3; i++) {
                document.getElementById('tab' + i).style.display = 'none';
                document.querySelectorAll('.tab-button')[i - 1].classList.remove('active');
            }
            
            // Show selected tab
            document.getElementById('tab' + tabNum).style.display = 'block';
            document.querySelectorAll('.tab-button')[tabNum - 1].classList.add('active');
        }
        
        function updateAllCharts() {
            updateChart1();
            updateChart2();
            updateChart3();
        }
        
        function calculateIsobar(teams, pythPct) {
            const rs = teams.map(t => t.rsPerGame * t.gamesPlayed);
            const ra = teams.map(t => t.raPerGame * t.gamesPlayed);
            const minR = Math.min(...rs);
            const maxR = Math.max(...rs);
            const minRA = Math.min(...ra);
            const maxRA = Math.max(...ra);
            
            const points = [];
            for (let r = minR - 50; r <= maxR + 50; r += 10) {
                const calcRA = r * Math.sqrt((1 - pythPct) / pythPct);
                if (calcRA >= minRA - 50 && calcRA <= maxRA + 50) {
                    points.push({ x: r, y: calcRA });
                }
            }
            return points;
        }
        
        function updateChart1() {
            const teams = currentLeague === 'AL' ? alData : nlData;
            document.getElementById('graph1Title').textContent = currentLeague + ' - 2025';
            
            const ctx = document.getElementById('chart1');
            if (chart1) chart1.destroy();
            
            const teamPoints = teams.map(t => ({
                x: t.rs,
                y: t.ra,
                label: t.abbreviation,
                wins: t.w
            }));
            
            const isobar400 = calculateIsobar(teams, 0.400);
            const isobar500 = calculateIsobar(teams, 0.500);
            const isobar600 = calculateIsobar(teams, 0.600);
            
            chart1 = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Teams',
                            data: teamPoints,
                            backgroundColor: '#ef4444',
                            borderColor: '#ef4444',
                            pointRadius: 6,
                            pointHoverRadius: 8
                        },
                        {
                            label: '.400',
                            data: isobar400,
                            type: 'line',
                            borderColor: '#888',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false,
                            showLine: true
                        },
                        {
                            label: '.500',
                            data: isobar500,
                            type: 'line',
                            borderColor: '#888',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false,
                            showLine: true
                        },
                        {
                            label: '.600',
                            data: isobar600,
                            type: 'line',
                            borderColor: '#888',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false,
                            showLine: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    layout: {
                        padding: { top: 30, right: 50, bottom: 20, left: 20 }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return context[0].raw.label;
                                },
                                label: function(context) {
                                    return [
                                        'Wins: ' + context.raw.wins,
                                        'RS: ' + context.raw.x,
                                        'RA: ' + context.raw.y
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Runs Scored', font: { size: 14, weight: 'bold' } },
                            grid: { color: '#e0e0e0' }
                        },
                        y: {
                            title: { display: true, text: 'Runs Allowed', font: { size: 14, weight: 'bold' } },
                            reverse: true,
                            grid: { color: '#e0e0e0' }
                        }
                    }
                },
                plugins: [labelPlugin]
            });
        }
        
        function updateChart2() {
            const teams = currentLeague === 'AL' ? alData : nlData;
            document.getElementById('graph2Title').textContent = currentLeague + ' - 2025';
            
            const ctx = document.getElementById('chart2');
            if (chart2) chart2.destroy();
            
            const teamPoints = teams.map(t => ({
                x: t.obp,
                y: t.iso,
                label: t.abbreviation,
                rs: t.rs
            }));
            
            // Calculate league averages
            const avgOBP = teams.reduce((sum, t) => sum + t.obp, 0) / teams.length;
            const avgISO = teams.reduce((sum, t) => sum + t.iso, 0) / teams.length;
            
            const minOBP = Math.min(...teams.map(t => t.obp));
            const maxOBP = Math.max(...teams.map(t => t.obp));
            const minISO = Math.min(...teams.map(t => t.iso));
            const maxISO = Math.max(...teams.map(t => t.iso));
            
            chart2 = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Teams',
                            data: teamPoints,
                            backgroundColor: '#3b82f6',
                            borderColor: '#3b82f6',
                            pointRadius: 6,
                            pointHoverRadius: 8
                        },
                        {
                            label: 'Avg OBP',
                            data: [{ x: avgOBP, y: minISO }, { x: avgOBP, y: maxISO }],
                            type: 'line',
                            borderColor: '#888',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false,
                            showLine: true
                        },
                        {
                            label: 'Avg ISO',
                            data: [{ x: minOBP, y: avgISO }, { x: maxOBP, y: avgISO }],
                            type: 'line',
                            borderColor: '#888',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false,
                            showLine: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return context[0].raw.label;
                                },
                                label: function(context) {
                                    return [
                                        'Runs: ' + context.raw.rs,
                                        'OBP: ' + context.raw.x.toFixed(3),
                                        'ISO: ' + context.raw.y.toFixed(3)
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'On-Base Percentage (OBP)', font: { size: 14, weight: 'bold' } },
                            grid: { color: '#e0e0e0' }
                        },
                        y: {
                            title: { display: true, text: 'Isolated Power (ISO)', font: { size: 14, weight: 'bold' } },
                            grid: { color: '#e0e0e0' }
                        }
                    }
                },
                plugins: [labelPlugin]
            });
        }
        
        function updateChart3() {
            const teams = currentLeague === 'AL' ? alData : nlData;
            document.getElementById('graph3Title').textContent = currentLeague + ' - 2025';
            
            const ctx = document.getElementById('chart3');
            if (chart3) chart3.destroy();
            
            const teamPoints = teams.map(t => ({
                x: t.fip,
                y: t.der,
                label: t.abbreviation,
                ra: t.ra
            }));
            
            // Calculate league averages
            const avgFIP = teams.reduce((sum, t) => sum + t.fip, 0) / teams.length;
            const avgDER = teams.reduce((sum, t) => sum + t.der, 0) / teams.length;
            
            const minFIP = Math.min(...teams.map(t => t.fip));
            const maxFIP = Math.max(...teams.map(t => t.fip));
            const minDER = Math.min(...teams.map(t => t.der));
            const maxDER = Math.max(...teams.map(t => t.der));
            
            chart3 = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'Teams',
                            data: teamPoints,
                            backgroundColor: '#10b981',
                            borderColor: '#10b981',
                            pointRadius: 6,
                            pointHoverRadius: 8
                        },
                        {
                            label: 'Avg FIP',
                            data: [{ x: avgFIP, y: minDER }, { x: avgFIP, y: maxDER }],
                            type: 'line',
                            borderColor: '#888',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false,
                            showLine: true
                        },
                        {
                            label: 'Avg DER',
                            data: [{ x: minFIP, y: avgDER }, { x: maxFIP, y: avgDER }],
                            type: 'line',
                            borderColor: '#888',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            pointRadius: 0,
                            fill: false,
                            showLine: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return context[0].raw.label;
                                },
                                label: function(context) {
                                    return [
                                        'Runs Allowed: ' + context.raw.ra,
                                        'FIP: ' + context.raw.x.toFixed(2),
                                        'DER: ' + context.raw.y.toFixed(3)
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'FIP (Fielding Independent Pitching)', font: { size: 14, weight: 'bold' } },
                            reverse: true,
                            grid: { color: '#e0e0e0' }
                        },
                        y: {
                            title: { display: true, text: 'DER (Defensive Efficiency Record)', font: { size: 14, weight: 'bold' } },
                            grid: { color: '#e0e0e0' }
                        }
                    }
                },
                plugins: [labelPlugin]
            });
        }
        
        function downloadChart(chartNum) {
            let chart;
            if (chartNum === 1) chart = chart1;
            else if (chartNum === 2) chart = chart2;
            else if (chartNum === 3) chart = chart3;
            
            if (chart) {
                const url = chart.toBase64Image();
                const link = document.createElement('a');
                link.download = 'baseball-graph-' + chartNum + '.png';
                link.href = url;
                link.click();
            }
        }
        
        // Initialize on page load
        updateAllCharts();
    </script>
</body>
</html>